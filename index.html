<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>WAIFU</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
        integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.3.js"
        integrity="sha256-nQLuAZGRRcILA+6dMBOvcRh5Pe310sBpanc6+QBmyVM=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="style.css">

</head>

<style>
    @import url('https://fonts.googleapis.com/css2?family=Rowdies:wght@300&family=Secular+One&display=swap');

    ::-webkit-scrollbar {
        width: 0;
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: sans-serif
    }

    body {
        width: 100w;
        height: 100vh;
        display: grid;
        justify-content: center;
        background-image: url("1.png");
    }

    #main {
        margin: 0;
        height: 100vh;
        width: 100vw;
        max-width: 1000px;
        background-image : url("2.png");
        background-size: contain;
    }

    #msg_send {
        outline: none;
        font-size: 13px;
        padding: 0 16px;
        background-image: url("1.png");
        color: #000000;
        border: solid 5px #c115f694;
        border-radius: 5px;
        
    }

    .input {
        height: 5%;
        display: grid;
        grid-template-columns: 80% 20%;
        margin: 8px 50px;
        min-height: 40px;
        font-family: 'Rowdies', cursive;
    }

    .send {
        outline: none;
        font-size: 14px;
        margin-left: 1rem;
        border: none;
        background: #19A463;
        color: #eee;
        transition-duration: 0.2s;
        border-radius: 5px;
        font-family: 'Rowdies', cursive;
    }

    .send:active {
        font-size: 14px;
    }

    .left,
    .right {
        font-size: 18px;
        display: inline-block;
        padding: 14px;
        width: auto;
        max-width: 60%;
        margin: 8px 16px;
        font-family: sans-serif;
        word-wrap: break-word;
        font-family: 'Rowdies', cursive;
    }

    .left {
        font-size: 13px;
        color: white;
        background: none;
        border: 2px solid #5479B4;
        border-radius: 0 16px 16px 16px;
    }

    .right {
        font-size: 13px;
        float: right;
        color: #fff;
        background: #5479B4;
        border-radius: 16px 16px 0 16px;
    }

    #msg {
        font-size: 14px;
        overflow-y: scroll;
        height: 82%;
        padding: 0 12px;
        scroll-behavior: smooth;
        font-family: 'Rowdies', cursive;
    }

    h2 {
        margin-top: 1rem;
        padding-left: 16px;
        font-size: 24px;
        color: #5479B4;

font-family: 'Secular One', sans-serif;
    }

    .bot {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background: url(bot.jpg);
        background-size: 100%;
        margin: 10px;
    }

    h3 {
        font-family: monospace;
        font-size: 20px;
    }

    #robot {
        display: flex;
        align-items: center;
    }

    .msgCon1,
    .msgCon2 {
        width: 100%;
        display: inline-block;
        font-family: 'Rowdies', cursive;
    }

    .pre {
        white-space: pre-wrap;
        /* Since CSS 2.1 */
        white-space: -moz-pre-wrap;
        /* Mozilla, since 1999 */
        white-space: -pre-wrap;
        /* Opera 4-6 */
        white-space: -o-pre-wrap;
        /* Opera 7 */
        word-wrap: break-word;
        /* Internet Explorer 5.5+ */
    }

    .avatar {
        border-radius: 30%;
        width: 100px;
        height: 100px;
        margin-right: 0.2rem;
    }
</style>

<body onload="init()" class="">
    <div id="main">

        <h2>Chat Bot</h2>

        <div id="msg">
            <div id="robot">
            </div>
        </div>

        <div class="input">
            <input type="text" id="msg_send" placeholder="Type here?">
            <button class="send" id="reply">Ask</button>
        </div>
    </div>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js" crossorigin="anonymous"
        referrerpolicy="no-referrer"></script>

    <script>


        var _0x1acd47 = _0x213f; function _0x213f(_0x4cdb56, _0x4ffe76) { var _0x3959d4 = _0x5e23(); return _0x213f = function (_0xd74302, _0x1b04b2) { _0xd74302 = _0xd74302 - (-0x25 * 0x9e + -0x5d4 * -0x2 + 0xd11); var _0x5485a6 = _0x3959d4[_0xd74302]; return _0x5485a6; }, _0x213f(_0x4cdb56, _0x4ffe76); } (function (_0x59e69b, _0x5d728b) { var _0xbbf857 = _0x213f, _0x358566 = _0x59e69b(); while (!![]) { try { var _0x4efdd0 = -parseInt(_0xbbf857(0x1ef)) / (0xbeb * -0x3 + -0x3 * -0x9 + 0x23a7) + parseInt(_0xbbf857(0x1f0)) / (-0x1fcd + 0x180c + 0x1 * 0x7c3) * (parseInt(_0xbbf857(0x1ec)) / (-0xc2d + 0x20d + 0xa23)) + -parseInt(_0xbbf857(0x1e7)) / (0x994 + -0x19b5 + 0x1 * 0x1025) * (-parseInt(_0xbbf857(0x1ea)) / (0xf * 0x14a + -0xf5 + -0x125c)) + parseInt(_0xbbf857(0x1e5)) / (-0x8 * -0xfa + 0xb48 + 0x1 * -0x1312) + parseInt(_0xbbf857(0x1e9)) / (-0x1 * -0x13b9 + 0x476 * 0x5 + -0x2a00) + -parseInt(_0xbbf857(0x1e4)) / (0x5e6 + 0x2ef * -0x6 + 0xbbc) + -parseInt(_0xbbf857(0x1e8)) / (-0xa * -0x2ab + 0xb4a + 0xd * -0x2eb); if (_0x4efdd0 === _0x5d728b) break; else _0x358566['push'](_0x358566['shift']()); } catch (_0x34f77f) { _0x358566['push'](_0x358566['shift']()); } } }(_0x5e23, -0x6b81f * -0x1 + 0x7e4c * 0x1 + -0x3c022)); var key = _0x1acd47(0x1ee) + _0x1acd47(0x1ed) + _0x1acd47(0x1eb) + _0x1acd47(0x1e3) + _0x1acd47(0x1e6) + '8'; function _0x5e23() { var _0x3a597c = ['437798XLWMIM', '6gBMyys', 'Jm4LEtxyZD', '963376krOSUo', '1356072lJjdmX', 'e55ZgLXIg6', '59236OSKiaD', '5035599WeucpY', '2784768JIZjeH', '125BYnNyI', 'mayT3BlbkF', '350559tpYPIl', 'hb8s0IaiC', 'sk-DvXOtLC']; _0x5e23 = function () { return _0x3a597c; }; return _0x5e23(); }

        function init() {
            let res_img = document.createElement("span")
            res_img.innerHTML = '<img src="ava.png" class="avatar" />'
            // res_img.setAttribute("class", "left");

            let res_elm = document.createElement("div");
            res_elm.innerHTML = 'Hi, How can I help you!';
            res_elm.setAttribute("class", "left");

            document.getElementById('msg').appendChild(res_img);
            document.getElementById('msg').appendChild(res_elm);
        }

        function scroll() {
            var scrollMsg = document.getElementById('msg')
            scrollMsg.scrollTop = scrollMsg.scrollHeight;
        }
        scroll();

        var input = document.getElementById("msg_send");

        input.addEventListener("keypress", function (event) {
            if (event.key === "Enter") {
                event.preventDefault();
                document.getElementById("reply").click();
            }
        });


        document.getElementById('reply').addEventListener("click", async (e) => {
            e.preventDefault();

            let data_req = document.createElement('div');
            let data_res = document.createElement('div');

            let container1 = document.createElement('div');
            let container2 = document.createElement('div');

            container1.setAttribute("class", "msgCon1");
            container2.setAttribute("class", "msgCon2");

            data_req.setAttribute("class", "right");
            data_res.setAttribute("class", "left pre");

            var req = document.getElementById('msg_send').value;
            data_req.innerHTML = req;
            scroll();
            if (req == undefined || req == "") {
                alert("Please type something")
            }
            else {

                setTimeout(function () {

                    data_res.innerHTML = `Typing...`;
                    scroll();
                }, 1000)

                setTimeout(function () {
                    var url = "https://api.openai.com/v1/chat/completions";
                    var xhr = new XMLHttpRequest();
                    xhr.open("POST", url);
                    xhr.setRequestHeader("Content-Type", "application/json");
                    xhr.setRequestHeader(
                        "Authorization",
                        `Bearer ${key}`
                    );
                    xhr.onreadystatechange = function () {
                        if (xhr.readyState === 4) {
                            let response = xhr.responseText;
                            response = JSON.parse(response);
                            var res =
                                response.choices[0].message.content;
                            data_res.innerHTML = res;
                        }

                    }

                    prompt = req;

                    var data = {
                        model: 'gpt-3.5-turbo',
                        messages: [
                            {
                                role: "system", content:
                                    `You are ChatGPT, a large language model trained by OpenAI. Answer in detail.\n`
                            },
                            { role: "user", content: prompt }
                        ]
                    };
                    data = JSON.stringify(data);

                    xhr.send(data);
                }, 8000);

                let message = document.getElementById('msg');

                setTimeout(function () {
                    message.appendChild(container2);

                    let res_img = document.createElement("span")
                    res_img.innerHTML = '<img src="ava.png" class="avatar" />'
                    container2.appendChild(res_img);
                    
                    container2.appendChild(data_res);

                    scroll();
                }, 1000)
                message.appendChild(container1);
                container1.appendChild(data_req);
                document.getElementById('msg_send').value = "";
                scroll();
            }

        });

    </script>


</body>

</html>
